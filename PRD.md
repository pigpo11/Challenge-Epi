# Product Requirements Document (PRD): 에피소드 서초/강남 식단 & 운동 AI 챌린지

## 1. 프로젝트 개요
에피소드 서초/강남 거주 멤버들을 대상으로, Gemini AI를 활용하여 개인 맞춤형 식단 및 운동 계획을 추천하고 기록하며, 커뮤니티 내 경쟁(랭킹)을 통해 동기부여를 제공하는 웹 서비스입니다.

## 2. 주요 타겟 및 가치 제안
- **타겟**: 에피소드 서초/강남 거주 챌린지 참가 멤버
- **가치 제안**: 
  - Gemini AI를 통한 전문적인 식단/운동 가이드 제공
  - 개인별 정확한 수치 기반의 다이어트 목표 설정
  - 챌린지 멤버 간 랭킹 시스템을 통한 지속적인 참여 유도

## 3. 주요 기능 요구사항

### 3.1. 사용자 프로필 및 개인화 설정
- **신체 정보 입력**: 키, 몸무게 (필수), 인바디 수치 (선택 사항).
- **기초대사량(BMR) 관리**: 
  - 신체 정보를 기반으로 자동 계산하되, 사용자가 수동으로 입력하거나 추후 수정 가능하도록 구현.
- **활동량 체크 및 TDEE 계산**:
  - 주당 활동량을 5단계로 선택 (이미지 기준):
    - 거의 없음 (좌식생활, 운동 안함): BMR x 1.2
    - 활동량 적음 (주당 1~3회 운동): BMR x 1.375
    - 보통 (주당 3~5회 운동): BMR x 1.55
    - 활동적 (주당 6~7회 운동): BMR x 1.725
    - 매우 활동적 (매일 운동, 하루 2번 운동): BMR x 1.9
- **일일 다이어트 칼로리 설정**:
  - 계산된 TDEE에서 사용자가 설정한 비율(1~20%)을 감량하여 목표 칼로리 자동 설정.

### 3.2. 목표 관리 및 추천 트랙
사용자는 다음 3가지 트랙 중 하나를 선택할 수 있습니다.
- **식단**: 식단 추천 및 관리 기능만 활성화.
- **운동**: 운동 추천 및 관리 기능만 활성화.
- **식단/운동 복합**: 두 가지 기능을 모두 활성화.

### 3.3. AI 식단 추천 및 매크로(영양소) 설정
- **일일 영양소 목표 자동 계산**:
  - **단백질**: 남자 (체중 x 2g), 여자 (체중 x 1.5g) 자동 설정.
  - **지방**: 전체 다이어트 칼로리의 25%로 설정.
  - **탄수화물**: 남은 칼로리를 모두 탄수화물로 배정.
  - *참고 수치*: 탄수화물(4kcal/g), 단백질(4kcal/g), 지방(9kcal/g).
- **Gemini AI 식단 추천**: 
  - 설정된 탄/단/지 목표 수치에 맞춰 탄수화물, 단백질, 지방이 고루 잡힌 식단 추천.
  - 사용자가 선호하거나 피해야 할 음식을 반영할 수 있는 인터페이스 제공.

### 3.4. AI 운동 추천
- **유산소 중심 추천**: 본인이 설정한 주간 운동 횟수에 맞춰 러닝, 유산소성 운동 위주의 적절한 루틴 추천.
- **개인화**: 사용자의 체력 수준 및 선호도에 따른 운동 강도 조절.

### 3.5. 인증 및 기록 시스템
- **사진 인증**: 식단 및 운동 수행 후 사진을 업로드하여 기록.
- **데일리 로그**: 일일 달성 여부를 확인하고 피드백 제공.

### 3.6. 랭킹 시스템 (Ranking)
- **파트별 랭킹**: 식단 이행률, 운동 수행률, 종합 점수 등 파트별 순위 노출.
- **UI/UX**: `butfit-lifting.com/ranking` 스타일을 참고하여 상위 랭커의 기록과 나의 위치를 직관적으로 비교.

### 3.7. 관리자 페이지 (/admin)
- **멤버 관리**: 전체 챌린지 참가 멤버 리스트 확인.
- **인증 현황**: 요일별/멤버별 식단 및 운동 인증 사진 모아보기 기능.
- **포인트 관리**: 멤버별 포인트 수동 조정 기능 (옵션).

### 3.8. 개인 설정 및 기록 확인 (Settings)
- **히스토리**: 본인이 업로드한 인증 사진을 요일별로 달력 또는 리스트 형식으로 확인.
- **프로필 수정**: 키, 몸무게 등 신체 정보 및 닉네임 수정 기능.

## 4. 데이터베이스 스키마 (Database Schema)

### 4.1. `profiles` 테이블
- `id`: UUID (Primary Key, Auth.users 연동)
- `nickname`: Text
- `gender`: Text ('male', 'female')
- `height`, `weight`: Numeric
- `age`: Integer
- `activity`: Numeric (활동 지수)
- `deficit`: Integer (감량 비율 %)
- `track`: Text ('diet', 'workout', 'both')
- `points`: Integer (기본 0)
- `target_calories`: Numeric

### 4.2. `certifications` 테이블
- `id`: UUID (Primary Key)
- `user_id`: UUID (Foreign Key -> profiles.id)
- `type`: Text ('diet', 'workout')
- `image_url`: Text (S3/Supabase Storage URL)
- `created_at`: Timestamp (요일 계산 및 정렬용)

## 5. 기술 스택 (Updated)
- **Backend/DB**: Supabase (PostgreSQL + Auth + Storage)
- **AI**: Google Gemini AI
- **Frontend**: Vite + React + Framer Motion

## 5. UI/UX 디자인 전략 (Aesthetics)
- **Premium Look**: 에피소드 거주자의 라이프스타일에 맞춘 고급스러운 다크 모드 또는 네오 브루탈리즘 스타일 적용.
- **Interactive**: 활동량 선택 시 실시간 칼로리 변화 애니메이션, 랭킹 리스트의 부드러운 전환 효과.
- **Mobile First**: 챌린지 특성상 모바일 접속이 잦으므로 완벽한 반응형 레이뉴아웃 구현.

## 6. 향후 확장 사양
- 멤버 간 응원 댓글 및 좋아요 기능
- 주간 리포트 생성 (AI 총평)
- 오프라인 챌린지 연동 기능
